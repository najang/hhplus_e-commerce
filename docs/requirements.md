# 이커머스 서비스 요구사항 분석

## 사용자(User)

### 기능적 요구사항

- 사용자는 자신의 잔액을 조회할 수 있다.
- 사용자는 특정 금액을 잔액으로 충전할 수 있다.
- 결제에 성공하면 잔액에서 결제 금액만큼 차감된다.

### 비기능적 요구사항

- 사용자가 동시에 충전할 경우 잔액이 최대금액을 초과하지 않도록 동시성이 보장되어야 한다.

## 상품(Product)

### 기능적 요구사항

- 상품 정보(ID, 이름, 가격, 잔여 수량)를 조회할 수 있다.
- 결제에 성공하면 주문 수량만큼 재고가 감소된다.

### 비기능적 요구사항

- 잔여 수량은 실시간으로 조회되어야 한다.
- 여러 사용자가 동시에 동일한 상품을 구매할 경우 재고가 음수가 되지 않도록 동시성이 보장되어야 한다.

## 쿠폰(Coupon)

### 기능적 요구사항

- 쿠폰 식별자를 통해 보유 쿠폰 목록을 조회할 수 있다.
- 쿠폰은 선착순으로 발급된다.
    - 쿠폰은 한정된 수량을 가진다.
- 쿠폰은 만료기간을 가진다.
    - 결제 시 유효한 할인 쿠폰을 함께 제출하면 할인 혜택을 부여받을 수 있다.

### 비기능적 요구사항

- 여러 사용자가 동시에 발급을 요청해도 초과 발급되지 않아야 한다.

## 주문 및 결제(Order/Payment)

### 기능적 요구사항

- 사용자는 여러 상품을 선택해 수량과 함께 주문할 수 있다.
- 결제에 성공하면 사용자의 잔액에서 결제 금액만큼 차감된다.
- 결제에 성공하면 실시간으로 주문 정보를 데이터 플랫폼에 전송한다.

### 비기능적 요구사항

- 결제, 잔액 차감, 쿠폰 사용, 재고 감소는 동일한 트랜잭션에서 실행되어야 한다.

## 상품 통계(Product Rank)

### 기능적 요구사항

- 주문 및 결제가 완료된 최근 3일간 가장 많이 팔린 상위 5개 상품 정보 목록을 조회한다.
- 상품 통계는 하루 단위로 집계된다.

### 비기능적 요구사항

- 성능 최적화를 위해 조회 요청 시 실시간으로 계산하거나, 집계 결과를 캐싱하여 제공한다.